---
import type { Page } from 'types';
import Layout from '@layouts/Layout.astro';
import Cards from '@components/Cards.astro';
import Cta from '@components/Cta.astro';
import Hero from '@components/Hero.astro';
import Logos from '@components/Logos.astro';
import Testimonials from '@components/Testimonials.astro';
import VideoPlayer from '@components/VideoPlayer.astro'; 
import Pdf from '@components/Pdf.astro'; 
import { fetchData, getPageById } from '@data/page';

export async function getStaticPaths() {
    const data = await fetchData();
    return data.map((page: Page) => {
        const slug = page.slug.current === '/' ? undefined : page.slug.current;
        return {
            params: { slug },
            props: { id: page._id }
        };
    });
}

const { id } = Astro.props;
const pages = await getPageById(id);
const page: Page = pages.length ? pages[0] : null;

const { _id, title, sections, metaTitle, metaDescription, socialImage } = page || {};

const componentMap = {
    cardsSection: Cards,
    ctaSection: Cta,
    heroSection: Hero,
    logosSection: Logos,
    testimonialsSection: Testimonials,
    videoSection: VideoPlayer,
    PdfSection: Pdf 
};
---

<Layout title="Voyager" description="Voyager-web">
  <section>
    <title>Voyager: Real-Time Splatting City-Scale 3D Gaussians on Your Phone</title>

    <video width="800" controls>
      <source src="/public/demo.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  </section>

  <section>
    <h2>讲义图像</h2>

    <ul>
      <li>
        <h3>第一章：绪论</h3>
        <img src="/pdf-images/chapter1.png" alt="第一章" width="600" />
      </li>
      <li>
        <h3>第二章：基本概念</h3>
        <img src="/pdf-images/chapter2.png" alt="第二章" width="600" />
      </li>
    </ul>
  </section>
</Layout>